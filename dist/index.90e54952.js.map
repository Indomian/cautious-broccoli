{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-17f7e6129ea686bf.js","src/utils/onReady.js","src/utils/getElement.js","node_modules/@swc/helpers/src/_define_property.mjs","src/host/input.ts","node_modules/@parcel/runtime-js/lib/helpers/get-worker-url.js","node_modules/@parcel/runtime-js/lib/runtime-a7dd5e3a60c32e38.js","src/host/worker.ts","src/host/workerWorkaround.js","src/render/vector/exceptions.ts","src/render/vector/vec2Math.ts","src/render/vector/math.ts","src/render/vector/vec2.ts","src/render/items/item.js","src/render/items/circle.js","src/render/vector/vec2Line.ts","src/render/objects/types.ts","src/render/objects/collisionModels.js","src/render/objects/object.ts","src/render/objects/ball.ts","src/render/constrains/constrain.js","src/render/constrains/viewport.js","src/render/constrains/circle.js","src/render/objectsGenerator.js","src/render/mappedObjectsGenerator.js","src/render/totalObjectsGenerator.js","src/render/grid.ts","src/render/solver.ts","src/render/items/rect.js","src/render/renderableObjects/object.js","src/render/objects/immovableBall.ts","src/render/renderableObjects/immovableLine.js","src/render/objects/immovableLine.ts","src/render/items/line.js","src/render/items/circleWithText.js","src/render/items/frame.js","src/render/index.js","src/host/direct.ts","src/host/main.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"GHvDZ\\\":\\\"index.90e54952.js\\\",\\\"bG1Fz\\\":\\\"main.e695ff63.js\\\"}\"));","const DOCUMENT_STATE_LOADING = \"loading\";\n\n/**\n * Calls function when webpage is ready\n * @param {function} callback\n */\nexport function onReady(callback) {\n    if (document.readyState !== DOCUMENT_STATE_LOADING) {\n        callback();\n    } else {\n        document.addEventListener(\"DOMContentLoaded\", callback);\n    }\n}\n","export class ElementNotFound extends Error {}\n\nexport function getElement(selector) {\n    const element = document.querySelector(selector);\n    if (!element) {\n        throw new ElementNotFound(selector);\n    }\n\n    return element;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","export interface UIEvent {}\n\nexport interface UIMouseEvent {\n    screenX: number,\n    screenY: number,\n    dx: number,\n    dy: number,\n    leftButtonDown: boolean\n}\n\nexport type UserInputHandler = (event: UIEvent) => void;\n\nexport class UserInput {\n    _canvas: HTMLCanvasElement;\n    _handlers: Set<UserInputHandler>;\n\n    _oldX: number;\n    _oldY: number;\n\n    _leftButtonDown: boolean;\n\n    constructor(canvas: HTMLCanvasElement) {\n        this._canvas = canvas;\n        this._handlers = new Set();\n\n        this._leftButtonDown = false;\n\n        this.addHandlers();\n    }\n\n    private addHandlers() {\n        this._canvas.addEventListener('mouseenter', this.mouseEnter);\n        this._canvas.addEventListener('mouseleave', this.mouseLeave);\n        this._canvas.addEventListener('mousemove', this.mouseMove);\n        this._canvas.addEventListener('mousedown', this.mouseDown);\n        this._canvas.addEventListener('mouseup', this.mouseUp);\n        this._canvas.addEventListener('click', this.click);\n    }\n\n    private removeHandlers() {\n\n    }\n\n    private processEvent(event) {\n        this._handlers.forEach((callback: UserInputHandler) => {\n            callback(event);\n        })\n    }\n\n    addHandler(callback: UserInputHandler) {\n        this._handlers.add(callback);\n    }\n\n    removeHandler(callback: UserInputHandler) {\n        if (this._handlers.has(callback)) {\n            this._handlers.delete(callback);\n        }\n    }\n\n    createMouseEvent(browserEvent: MouseEvent): UIMouseEvent {\n        return {\n            screenX: browserEvent.offsetX,\n            screenY: browserEvent.offsetY,\n            dx: -this._oldX + browserEvent.offsetX,\n            dy: -this._oldY + browserEvent.offsetY,\n            leftButtonDown: this._leftButtonDown\n        }\n    }\n\n    mouseEnter = (browserEvent: MouseEvent) => {\n        const event = this.createMouseEvent(browserEvent);\n        this.processEvent(event);\n\n        this._oldX = event.screenX;\n        this._oldY = event.screenY;\n    }\n\n    mouseLeave = (browserEvent: MouseEvent) => {\n        const event = this.createMouseEvent(browserEvent);\n        this.processEvent(event);\n\n        this._oldX = event.screenX;\n        this._oldY = event.screenY;\n    }\n\n    mouseMove = (browserEvent: MouseEvent) => {\n        const event = this.createMouseEvent(browserEvent);\n        this.processEvent(event);\n\n        this._oldX = event.screenX;\n        this._oldY = event.screenY;\n    }\n\n    mouseDown = (browserEvent: MouseEvent) => {\n        this._leftButtonDown = true;\n\n        const event = this.createMouseEvent(browserEvent);\n        this.processEvent(event);\n\n        this._oldX = event.screenX;\n        this._oldY = event.screenY;\n    }\n\n    mouseUp = (browserEvent: MouseEvent) => {\n        this._leftButtonDown = false;\n\n        const event = this.createMouseEvent(browserEvent);\n        this.processEvent(event);\n\n        this._oldX = event.screenX;\n        this._oldY = event.screenY;\n    }\n\n    click = (browserEvent: MouseEvent) => {\n        const event = this.createMouseEvent(browserEvent);\n        this.processEvent(event);\n\n        this._oldX = event.screenX;\n        this._oldY = event.screenY;\n    }\n}","\"use strict\";\n\nmodule.exports = function (workerUrl, origin, isESM) {\n  if (origin === self.location.origin) {\n    // If the worker bundle's url is on the same origin as the document,\n    // use the worker bundle's own url.\n    return workerUrl;\n  } else {\n    // Otherwise, create a blob URL which loads the worker bundle with `importScripts`.\n    var source = isESM ? 'import ' + JSON.stringify(workerUrl) + ';' : 'importScripts(' + JSON.stringify(workerUrl) + ');';\n    return URL.createObjectURL(new Blob([source], {\n      type: 'application/javascript'\n    }));\n  }\n};","let workerURL = require('./helpers/get-worker-url');\nlet url = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bG1Fz\"));\nmodule.exports = workerURL(url.toString(), url.origin, true);","import {UserInput, UIEvent} from \"./input\";\nimport {createWorker} from \"./workerWorkaround.js\";\n\nexport enum MessageType {\n    MessageNone = 0,\n    MessageInit = 1,\n    MessageUserInput = 2\n}\n\nexport class MessageEvent {\n    type = MessageType.MessageNone;\n}\n\nexport class MessageInit extends MessageEvent {\n    type = MessageType.MessageInit;\n    canvas;\n\n    constructor(canvas) {\n        super();\n        this.canvas = canvas;\n    }\n}\n\nexport class MessageUserInput extends MessageEvent {\n    type = MessageType.MessageUserInput;\n    event;\n\n    constructor(event) {\n        super();\n        this.event = event;\n    }\n}\n\nexport class WorkerApplication {\n    worker;\n    userInput;\n\n    constructor(canvas) {\n        this.worker = createWorker();\n        const offscreen = canvas.transferControlToOffscreen();\n\n        this.worker.postMessage(\n            new MessageInit(offscreen),\n            [offscreen]\n        );\n\n        this.userInput = new UserInput(canvas);\n        this.userInput.addHandler(this.sendUserInputEvent);\n    }\n\n    sendUserInputEvent = (event: UIEvent) => {\n        this.worker.postMessage(\n            new MessageUserInput(event)\n        )\n    }\n\n    initUserInput() {\n\n    }\n}","export function createWorker() {\n    return new Worker(new URL('../worker/main.ts', import.meta.url), {type: 'module'});\n}","export class Vec2Exception extends Error {}\n\nexport class Vec2ExceptionParallel extends Vec2Exception {}\nexport class Vec2ExceptionNoPerpendicularVectorToZeroVector extends Vec2Exception {}","import { Vec2 } from \"./vec2\";\nimport { Vec2ExceptionParallel } from \"./exceptions\";\nimport { Vec2Line } from \"./vec2Line\";\n\nexport class Vec2Math {\n    static diff(vec1: Vec2, vec2: Vec2): Vec2 {\n        return new Vec2(vec1.x - vec2.x, vec1.y - vec2.y);\n    }\n\n    static mul(vec1: Vec2, scalar: number): Vec2 {\n        return new Vec2(vec1.x * scalar, vec1.y * scalar);\n    }\n\n    /**\n     * Calculates distance between 2 vectors\n     * @param {Vec2} vec1\n     * @param {Vec2} vec2\n     * @returns {number}\n     */\n    static distance(vec1: Vec2, vec2: Vec2): number {\n        return Vec2Math.diff(vec1, vec2).length;\n    }\n\n    /**\n     * Calculates square of distance between 2 vectors\n     * @param {Vec2} vec1\n     * @param {Vec2} vec2\n     * @returns {number}\n     */\n    static distance2(vec1: Vec2, vec2: Vec2): number {\n        return Vec2Math.diff(vec1, vec2).length2;\n    }\n\n    /**\n     * Finds intersection between 2 lines\n     * @param {Vec2Line} line1\n     * @param {Vec2Line} line2\n     * @returns {Vec2}\n     */\n    static intersect(line1, line2) {\n        if (line1.K === line2.K) {\n            throw new Vec2ExceptionParallel()\n        }\n\n        if (isNaN(line1.K) || isNaN(line2.K)) {\n            // One of two lines is vertical\n            if (isNaN(line1.K)) {\n                return line2.makeVec2FromX(line1._vec1.x);\n            } else {\n                return line1.makeVec2FromX(line2._vec1.x);\n            }\n        } else {\n            const x = (line1.B - line2.B) / (line2.K - line1.K);\n            return line1.makeVec2FromX(x);\n        }\n    }\n\n    /**\n     * Dot product of 2 vectors\n     * @param {Vec2} vec1\n     * @param {Vec2} vec2\n     * @returns {number}\n     */\n    static dot(vec1: Vec2, vec2: Vec2): number {\n        return vec1.x * vec2.x + vec1.y * vec2.y;\n    }\n\n    /**\n     *\n     * @param {Vec2} vec\n     * @param {Vec2Line} line\n     * @returns {Vec2}\n     */\n    static mirror(vec: Vec2, line: Vec2Line) {\n        const normal = line.direction.perpendicular;\n        return vec.diff(\n            normal.mul(2 * Vec2Math.dot(vec, normal))\n        );\n    }\n\n    static scale(vec1: Vec2, vec2: Vec2) {\n        return new Vec2(\n            vec1.x / vec2.x,\n            vec1.y / vec2.y\n        )\n    }\n}\n","export const MATH_ERROR = 0.000001;\nexport const MATH_ERROR2 = MATH_ERROR * MATH_ERROR;\nexport const SQRT2 = Math.sqrt(2);\n\n/**\n * Checks if a equals b with given error\n * @param {number} a\n * @param {number} b\n * @param {number} error\n * @returns {boolean}\n */\nexport function isEqual(a, b, error) {\n    return Math.abs(a - b) < error;\n}\n\nexport type NullableNumber = number | null;\n","import { Vec2Math } from \"./vec2Math\";\nimport { MATH_ERROR2, NullableNumber } from \"./math\";\nimport { Vec2ExceptionNoPerpendicularVectorToZeroVector } from \"./exceptions\";\n\nexport class Vec2 {\n    private _x: number = 0;\n    private _y: number = 0;\n    private _length: NullableNumber = null;\n    private _length2: NullableNumber = null;\n\n    static lengthCallsCount = 0;\n    static length2CallsCount = 0;\n\n    constructor(x: number, y: number, l?: number) {\n        this._x = x;\n        this._y = y;\n\n        if (l) {\n            this._length = l;\n            this._length2 = l * l;\n        }\n    }\n\n    get x(): number {\n        return this._x;\n    }\n\n    get y(): number {\n        return this._y;\n    }\n\n    set x(x: number) {\n        this._x = x;\n        this._length = null;\n    }\n\n    set y(y:number) {\n        this._y = y;\n        this._length = null;\n    }\n\n    get length(): number {\n        if (this._length === null) {\n            this._length = Math.sqrt(this.x*this.x + this.y*this.y);\n            Vec2.lengthCallsCount++;\n        }\n\n        return this._length;\n    }\n\n    /**\n     * Returns length^2\n     */\n    get length2(): number {\n        if (this._length2 === null) {\n            this._length2 = this._x*this._x + this._y*this._y;\n            Vec2.length2CallsCount++;\n        }\n\n        return this._length2;\n    }\n\n    /**\n     * Adds vec2 to current vector\n     * @param {Vec2} vec2\n     * @returns {Vec2}\n     */\n    addSelf(vec2: Vec2): Vec2 {\n        this._x += vec2.x;\n        this._y += vec2.y;\n        this._length = null;\n        return this;\n    }\n\n    /**\n     * Subtract from current vector given vector\n     * @param {Vec2} vec2\n     * @returns {Vec2}\n     */\n    subSelf(vec2: Vec2): Vec2 {\n        this._x -= vec2.x;\n        this._y -= vec2.y;\n        this._length = null;\n        return this;\n    }\n\n    /**\n     * Flips along X axis\n     * @returns {Vec2}\n     */\n    flipYSelf(): Vec2 {\n        this._y = -this._y;\n        return this;\n    }\n\n    /**\n     * Flips along Y axis\n     * @returns {Vec2}\n     */\n    flipXSelf(): Vec2 {\n        this._x = -this._x;\n        return this;\n    }\n\n    flipSelf(): Vec2 {\n        this._x = -this._x;\n        this._y = -this._y;\n        return this;\n    }\n\n    /**\n     * Checks if this vector equals given vector using global MATH_ERROR const\n     * @param vec2\n     */\n    equals(vec2) {\n        return Vec2Math.distance2(this, vec2) < MATH_ERROR2;\n    }\n\n    /**\n     * Sums current vector and given vector and returns new vector\n     * @param {Vec2} vec2\n     * @returns {Vec2}\n     */\n    sum(vec2: Vec2): Vec2 {\n        return new Vec2(this.x + vec2.x, this.y + vec2.y);\n    }\n\n    /**\n     * Calculate difference between current vector and given vector and returns\n     * new vector\n     *\n     * @param {Vec2} vec2\n     * @returns {Vec2}\n     */\n    diff(vec2: Vec2) {\n        return new Vec2(this.x - vec2.x, this.y - vec2.y);\n    }\n\n    /**\n     * Multiplicates vector by number\n     * @param {number} value\n     * @returns {Vec2}\n     */\n    mul(value: number) {\n        return new Vec2(this.x * value, this.y * value);\n    }\n\n    copy() {\n        return new Vec2(this.x, this.y);\n    }\n\n    applySelf(callback): Vec2 {\n        this.x = callback(this.x);\n        this.y = callback(this.y);\n        return this;\n    }\n\n    /**\n     * Returns normalized vector\n     * @returns {Vec2}\n     */\n    get ort() {\n        const l = this.length;\n        return new Vec2(this.x / l, this.y / l, 1);\n    }\n\n    get perpendicular() {\n        if (this.x === 0) {\n            // Vertical\n            if (this.y > 0) {\n                return Vec2.Horizontal().ort\n            } else if (this.y < 0) {\n                return Vec2.Horizontal().ort.flipSelf();\n            } else {\n                throw new Vec2ExceptionNoPerpendicularVectorToZeroVector();\n            }\n        } else if (this.y === 0) {\n            // Horizontal\n            if (this.x > 0) {\n                return Vec2.Vertical().ort\n            } else if (this.x < 0) {\n                return Vec2.Vertical().ort.flipSelf();\n            }\n        }\n\n        return new Vec2(\n            -this.y / this.x,\n            1\n        ).ort;\n    }\n\n    static Zero() {\n        return new Vec2(0, 0);\n    }\n\n    static Horizontal() {\n        return new Vec2(1, 0);\n    }\n\n    static Vertical() {\n        return new Vec2(0, 1);\n    }\n\n    static Down(y) {\n        return new Vec2(0, y);\n    }\n\n    static Right(x) {\n        return new Vec2(x, 0);\n    }\n}\n\n\n\n\n\n\n\n\n","import {Vec2} from \"../vector/vec2\";\n\nexport class Item {\n    position = Vec2.Zero();\n\n    /**\n     *\n     * @param {CanvasRenderingContext2D} context\n     */\n    constructor(context, position) {\n        this.context = context;\n        this.position = position;\n    }\n\n    /**\n     * Method immediately renders object on context\n     */\n    render() {\n\n    }\n\n    /**\n     * Method tries to put object in render block\n     */\n    queue() {\n\n    }\n}","import {Item} from \"./item\";\n\nexport class Circle extends Item {\n    r = 0;\n    color = '#00ff00';\n\n    constructor(context, position, r, color) {\n        super(context, position);\n\n        if (r) {\n            this.r = r;\n        }\n\n        if (color) {\n            this.color = color;\n        }\n    }\n\n    render() {\n        this.context.beginPath()\n        this.context.arc(\n            this.position.x,\n            this.position.y,\n            this.r,\n            0,\n            2 * Math.PI\n        )\n\n        this.context.fillStyle = this.color;\n        this.context.fill();\n    }\n}","import { Vec2 } from \"./vec2\";\nimport { Vec2Math } from \"./vec2Math\";\nimport { MATH_ERROR, isEqual } from \"./math\";\n\nexport class Vec2Line {\n    private _vec1: Vec2 = Vec2.Zero();\n    private _vec2: Vec2 = Vec2.Zero();\n\n    private _direction: Vec2;\n    private _ort: Vec2;\n\n    private _length: number;\n    private _length2: number;\n\n    /**\n     * Y = K*X + B\n     * @type {number}\n     */\n    private _k: number = 0;\n    private _b: number = 0;\n\n    constructor(vec1, vec2) {\n        this._vec1 = vec1;\n        this._vec2 = vec2;\n\n        this._direction = Vec2Math.diff(this._vec1, this._vec2);\n        this._length = this._direction.length;\n        this._length2 = this._direction.length2;\n        this._ort = this._direction.ort;\n\n        this.calculateKB();\n    }\n\n    /**\n     * Determines if given point lays on the line\n     * @param vec\n     * @returns {boolean}\n     */\n    inBetween(vec) {\n        const l1 = Vec2Math.diff(vec, this._vec1).length;\n        const l2 = Vec2Math.diff(this._vec2, vec).length;\n        const sum = l1 + l2;\n\n\n\n\n        return isEqual(this._length, sum, MATH_ERROR);\n    }\n\n    calculateKB() {\n        if (this._vec1.y === this._vec2.y) {\n            // Horizontal line\n            this._b = this._vec1.y;\n            this._k = 0;\n        } else if (this._vec1.x === this._vec2.x) {\n            // Vertical line\n            this._b = NaN;\n            this._k = NaN;\n        } else {\n            this._b = (this._vec1.x * this._vec2.y - this._vec1.y * this._vec2.x) / (this._vec1.x - this._vec2.x)\n            this._k = (this._vec1.y - this._vec2.y) / (this._vec1.x - this._vec2.x);\n        }\n    }\n\n    makeVec2FromX(x) {\n        return new Vec2(x, this._k * x + this._b);\n    }\n\n    copy() {\n        return new Vec2Line(\n            this._vec1,\n            this._vec2\n        )\n    }\n\n    moveBy(vec) {\n        this._vec1.addSelf(vec);\n        this._vec2.addSelf(vec);\n        this.calculateKB();\n    }\n\n    getPointProjection(vec) {\n        const a = this.direction;\n        const b = Vec2Math.diff(vec, this._vec1);\n        const cosabD = Vec2Math.dot(a, b) / (this.length);\n\n        return this._vec1.sum(\n            this.ort.mul(cosabD)\n        );\n    }\n\n    get B() {\n        return this._b;\n    }\n\n    get K() {\n        return this._k;\n    }\n\n    get length() {\n        return this._length;\n    }\n\n    get direction() {\n        return this._direction;\n    }\n\n    get ort() {\n        return this._ort;\n    }\n\n    get vec1() {\n        return this._vec1;\n    }\n\n    get vec2() {\n        return this._vec2;\n    }\n\n    static Vertical(x) {\n        return new Vec2Line(\n            new Vec2(x, 0),\n            new Vec2(x, Number.MAX_SAFE_INTEGER)\n        )\n    }\n\n    static Horizontal(y) {\n        return new Vec2Line(\n            new Vec2(0, y),\n            new Vec2(Number.MAX_SAFE_INTEGER, y)\n        )\n    }\n}","export enum SolverObjectTypes {\n    TypeNull = 0,\n    TypeBall = 1,\n    TypeImmovableBall = 2,\n    TypeImmovableLine = 3\n}\n","import {Vec2Math} from \"../vector/vec2Math\";\nimport {BallsObject} from \"./ball\";\nimport {SolverObjectTypes, TYPE_BALL, TYPE_IMMOVABLE_BALL, TYPE_IMMOVABLE_LINE} from \"./types\";\n\n/**\n * Collision between 2 balls objects\n * @param {BallsObject} obj1\n * @param {BallsObject} obj2\n */\nexport function collideBallAndBall(obj1, obj2) {\n    const between = Vec2Math.diff(obj1.currentPosition, obj2.currentPosition);\n    const distance = between.length;\n    const requiredDistance = obj1.radius + obj2.radius;\n\n    if (distance < requiredDistance) {\n        const normalized = between.ort;\n        const delta = requiredDistance - distance;\n        obj1.currentPosition.addSelf(Vec2Math.mul(normalized, obj1.radius / requiredDistance * delta * obj1.bounceValue));\n        obj2.currentPosition.subSelf(Vec2Math.mul(normalized, obj2.radius / requiredDistance * delta * obj2.bounceValue));\n    }\n}\n\n/**\n * Collision between ball and immovable ball\n * @param {BallsObject} ball\n * @param {ImmovableBallsObject} immovable\n */\nexport function collideBallAndImmovableBall(ball, immovable) {\n    const between = Vec2Math.diff(\n        ball.currentPosition,\n        immovable.currentPosition\n    );\n\n    const distance = between.length;\n    const requiredDistance = ball.radius + immovable.radius;\n\n    if (distance < requiredDistance) {\n        const normalized = between.ort;\n        const delta = requiredDistance - distance;\n        ball.currentPosition.addSelf(Vec2Math.mul(normalized, ball.radius / requiredDistance * delta * ball.bounceValue));\n    }\n}\n\n/**\n * Collision between ball and immovable line\n * @param {BallsObject} ball\n * @param {ImmovableLineObject} line\n */\nexport function collideBallAndImmovableLine(ball, line) {\n    try {\n        const projectionPoint = line._line.getPointProjection(ball.currentPosition);\n\n        if (line._line.inBetween(projectionPoint)) {\n            const between = Vec2Math.diff(\n                projectionPoint,\n                ball.currentPosition\n            )\n\n            if (between.length < ball.radius) {\n                const normalized = between.ort;\n\n                const delta = ball.radius - between.length;\n\n                ball.currentPosition.subSelf(\n                    Vec2Math.mul(normalized, delta * ball.bounceValue)\n                )\n            }\n        }\n    } catch (e) {\n    }\n}\n\nfunction flipObjects(obj1, obj2) {\n    return {\n        a: obj2,\n        b: obj1\n    }\n}\n\nexport function collide(a, b) {\n    let obj1 = a;\n    let obj2 = b;\n    if (obj1.type > obj2.type) {\n        const flipped = flipObjects(obj1, obj2);\n        obj1 = flipped.a;\n        obj2 = flipped.b\n    }\n\n    switch (true) {\n        case obj1.type === SolverObjectTypes.TypeBall && obj2.type === SolverObjectTypes.TypeBall:\n            return collideBallAndBall(obj1, obj2);\n        case obj1.type === SolverObjectTypes.TypeBall && obj2.type === SolverObjectTypes.TypeImmovableBall:\n            return collideBallAndImmovableBall(obj1, obj2);\n        case obj1.type === SolverObjectTypes.TypeBall && obj2.type === SolverObjectTypes.TypeImmovableLine:\n            return collideBallAndImmovableLine(obj1, obj2);\n        default:\n            return;\n    }\n}","import {SolverObjectTypes} from \"./types\";\nimport {Vec2} from \"../vector/vec2\";\n\nexport abstract class BaseSolverObject {\n    readonly type: SolverObjectTypes = SolverObjectTypes.TypeNull;\n    readonly index: number;\n    readonly immovable: boolean;\n\n    previousPosition = Vec2.Zero();\n    currentPosition = Vec2.Zero();\n\n    constructor() {\n        this.index = BaseSolverObject.index++;\n    }\n\n    update(step) {\n\n    }\n\n    accelerate(acc) {\n\n    }\n\n    collide(obj) {\n\n    }\n\n    addToGrid(collisionGrid) {\n\n    }\n\n    abstract moveBy(delta: Vec2);\n\n    abstract isPointInsideObject(point: Vec2): boolean;\n\n    static index = 0;\n}\n","import { Vec2 } from \"../vector/vec2\";\nimport { Vec2Line } from \"../vector/vec2Line\";\nimport { Vec2Math } from \"../vector/vec2Math\";\nimport {SolverObjectTypes} from \"./types\";\nimport { collide } from \"./collisionModels\";\nimport {BaseSolverObject} from \"./object\";\nimport {CollisionGrid} from \"../grid\";\n\nexport class BallsObject extends BaseSolverObject {\n    acc = Vec2.Zero();\n\n    radius = 10;\n    bounceValue = 1.1;\n\n    type = SolverObjectTypes.TypeBall;\n    immovable = false;\n\n    /**\n     * Creates balls object\n     * @param {Vec2} position\n     * @param {number} [radius]\n     */\n    constructor(position, radius) {\n        super();\n        this.previousPosition = position.copy();\n        this.currentPosition = position.copy();\n        if (radius !== undefined) {\n            this.radius = radius\n        }\n    }\n\n    /**\n     * Updates state of object\n     * @param {number} step\n     */\n    update(step) {\n        const velocity = this.velocity;\n        this.previousPosition = this.currentPosition.copy();\n        this.currentPosition.addSelf(\n            velocity.addSelf(\n                this.acc.mul(step * step)\n            )\n        )\n        this.acc = Vec2.Zero();\n    }\n\n    accelerate(acc) {\n        this.acc.addSelf(acc);\n        return this;\n    }\n\n    setVelocity(vel) {\n        this.velocity = vel;\n        return this;\n    }\n\n    /**\n     *\n     * @param {BallsObject} obj\n     */\n    collide(obj) {\n        collide(this, obj)\n    }\n\n    addToGrid(collisionGrid: CollisionGrid) {\n        collisionGrid.addObject(\n            Math.floor(this.currentPosition.x),\n            Math.floor(this.currentPosition.y),\n            this\n        )\n    }\n\n    moveBy(delta: Vec2) {\n        this.currentPosition.addSelf(delta);\n    }\n\n    isPointInsideObject(point: Vec2): boolean {\n        return Vec2Math.distance(this.currentPosition, point) < this.radius;\n    }\n\n    get velocity() {\n        return Vec2Math.diff(\n            this.currentPosition,\n            this.previousPosition\n        );\n    }\n\n    set velocity(v) {\n        this.previousPosition = Vec2Math.diff(this.currentPosition,v);\n    }\n\n    /**\n     *\n     * @returns {Vec2Line}\n     */\n    get movementVector() {\n        return new Vec2Line(this.previousPosition, this.currentPosition);\n    }\n}","export class Constrain {\n    constructor() {\n    }\n\n    /**\n     *\n     * @param {BallsObject} obj\n     */\n    applyConstrain(obj) {\n\n    }\n}","import { Constrain } from \"./constrain\";\n\nexport class ViewportConstrain extends Constrain {\n    _width = 0;\n    _height = 0;\n\n    constructor(width, height) {\n        super()\n        this.width = width;\n        this.height = height;\n    }\n\n    get width() {\n        return this._width;\n    }\n\n    set width(width) {\n        this._width = width;\n    }\n\n    get height() {\n        return this._height;\n    }\n\n    set height(height) {\n        this._height = height;\n    }\n\n    applyConstrain(obj) {\n        super.applyConstrain(obj);\n\n        if (obj.currentPosition.x - obj.radius < 0) {\n            obj.currentPosition.x = obj.radius;\n        }\n\n        if (obj.currentPosition.x + obj.radius > this._width) {\n            obj.currentPosition.x = this._width - obj.radius;\n        }\n\n        if (obj.currentPosition.y - obj.radius < 0) {\n            obj.currentPosition.y = obj.radius;\n        }\n\n        if (obj.currentPosition.y + obj.radius > this._height) {\n            obj.currentPosition.y = this._height - obj.radius;\n        }\n    }\n}","import {Constrain} from \"./constrain\";\nimport {Vec2} from \"../vector/vec2\";\n\nexport class CircleConstrain extends Constrain {\n    /**\n     *\n     * @type {Vec2}\n     */\n    center = Vec2.Zero();\n\n    radius = 0;\n\n    constructor(center, radius) {\n        super();\n\n        this.center = center;\n        this.radius = radius;\n    }\n\n    applyConstrain(obj) {\n        super.applyConstrain(obj);\n\n        const toCenter = obj.currentPosition.diff(this.center);\n        const distance = toCenter.length;\n        const r = obj.radius;\n\n        if (distance > (this.radius - r)) {\n            const n = toCenter.ort;\n            obj.currentPosition = this.center.sum(\n                n.mul(this.radius - r)\n            );\n        }\n    }\n\n}","export class ObjectsGenerator {\n    solver = null;\n    constructor(solver) {\n        this.solver = solver;\n    }\n\n    // TODO Make me iterator\n    getNextObject(step) {\n        return [];\n    }\n}","import {ObjectsGenerator} from \"./objectsGenerator\";\n\n\nexport class MappedObjectGeneratorItem {\n    /**\n     * Delay before object appear\n     * @type {number}\n     */\n    timeout;\n\n    /**\n     * Object configuration\n     * @type {BallsObject}\n     */\n    object;\n\n    constructor(timeout, object) {\n        this.timeout = timeout;\n        this.object = object;\n    }\n\n}\n\nexport class MappedObjectsGenerator extends ObjectsGenerator {\n    /**\n     * @param {MappedObjectGeneratorItem[]} map\n     */\n    constructor(solver, map) {\n        super(solver);\n\n        this.items = map;\n        this.currentTime = 0;\n    }\n\n    getNextObject(step) {\n        this.currentTime += step;\n\n        console.log(this.currentTime)\n\n        const index = this.items.findIndex((item) => item.timeout < this.currentTime);\n        if (index > -1) {\n            return [this.items.splice(index, 1)[0].object];\n        }\n    }\n}","import {ObjectsGenerator} from \"./objectsGenerator\";\n\nexport class TotalObjectsGenerator extends ObjectsGenerator {\n    constructor(solver, count, delay, createCallback) {\n        super(solver);\n        this.limit = count;\n        this.total = 0;\n\n        this.delay = delay;\n        this.create = createCallback;\n        this.lastCreateTime = 0;\n    }\n\n    getNextObject(step) {\n        if (this.total > this.limit) {\n            return [];\n        }\n\n        this.lastCreateTime += 1;\n        if (this.lastCreateTime > this.delay) {\n            const newItems = this.create(this.total);\n            this.lastCreateTime = 0;\n            this.total+= newItems.length;\n\n            return newItems;\n        }\n    }\n}","import { Vec2 } from \"./vector/vec2\";\nimport {BaseSolverObject} from \"./objects/object\";\nimport {Vec2Math} from \"./vector/vec2Math\";\n\nexport class CollisionCell {\n    objects: BaseSolverObject[] = [];\n    highlight: boolean = false;\n\n    static MAX_OBJECT_IN_CELL = 10;\n\n    addObject(obj) {\n        if (this.objects.length >= CollisionCell.MAX_OBJECT_IN_CELL) {\n            return\n        }\n\n        this.objects.push(obj);\n    }\n\n    clear() {\n        this.objects = [];\n        this.highlight = false;\n    }\n\n    remove(index) {\n        const objectIndex = this.objects.findIndex(obj => obj.index === index);\n        if (objectIndex !== -1) {\n            this.objects.splice(objectIndex, 1);\n        }\n    }\n\n    get count() {\n        return this.objects.length;\n    }\n}\n\ntype CollisionGridForEachCallback = (column: number, row: number, cell: CollisionCell, index?: number) => void;\n\nexport class CollisionGrid {\n    cells: CollisionCell[] = [];\n    _width: number;\n    _height: number;\n    _size: number;\n    cellSize: Vec2;\n\n    constructor(width, height, cellSize: Vec2) {\n        this._width = width;\n        this._height = height;\n\n        this.cellSize = cellSize;\n\n        this.resize();\n    }\n\n    get size(): number {\n        return this._size;\n    }\n\n    get width(): number {\n        return this._width;\n    }\n\n    set width(w: number) {\n        this._width = w;\n        this.resize();\n    }\n\n    get height(): number {\n        return this._height;\n    }\n\n    set height(h: number) {\n        this._height = h;\n        this.resize();\n    }\n\n    resize() {\n        this.cells = [];\n        this._size = this._width * this._height;\n        for (let i = 0; i < this._size; i++) {\n            this.cells.push(new CollisionCell());\n        }\n    }\n\n    addObject(worldX, worldY, obj) {\n        const x = Math.floor(worldX / this.cellSize.x);\n        const y = Math.floor(worldY / this.cellSize.y);\n\n        const index = x * this._height + y;\n        this.addObjectByIndex(index, obj);\n    }\n\n    addObjectByIndex(index, obj) {\n        if (!isNaN(index) && index>=0 && index<this.size) {\n            this.cells[index].addObject(obj);\n        }\n    }\n\n    makeIndexFromVec(vec) {\n        return vec.x * this._height + vec.y;\n    }\n\n    makeIndexFromCoord(x, y) {\n        return x * this._height + y;\n    }\n\n    makeVecFromIndex(index): Vec2 {\n        const x = Math.floor(index / this._height);\n        const y = index - x * this._height;\n        return new Vec2(x, y);\n    }\n\n    /**\n     * Adds object to all cells between given coords\n     * @param worldLeftTop\n     * @param worldRightBottom\n     * @param obj\n     */\n    addObjectToCells(worldLeftTop: Vec2, worldRightBottom: Vec2, obj: BaseSolverObject) {\n        const point1 = Vec2Math.scale(worldLeftTop, this.cellSize).applySelf(Math.floor);\n        const point2 = Vec2Math.scale(worldRightBottom, this.cellSize).applySelf(Math.floor);\n\n        const index1 = this.makeIndexFromVec(point1);\n        const index2 = this.makeIndexFromVec(point2);\n\n        if (point1.x === point2.x) {\n            // Vertical\n            for (let cellIndex = index1; cellIndex < index2; cellIndex++) {\n                this.cells[cellIndex].addObject(obj);\n            }\n        } else if (point1.y === point2.y) {\n            // Horizontal\n            for (let cellIndex = index1; cellIndex < index2; cellIndex+=this.height) {\n                this.cells[cellIndex].addObject(obj);\n            }\n        } else {\n            let left = Math.min(point1.x, point2.x);\n            let top = Math.min(point1.y, point2.y);\n            let right = Math.max(point1.x, point2.x);\n            let bottom = Math.max(point1.y, point2.y);\n            let height = bottom - top;\n            let startFrom = this.makeIndexFromCoord(left, top);\n\n            for (let x = 0; x <= right-left; x++) {\n                for (let y = 0; y <= height; y++) {\n                    const cellIndex= startFrom + x * this.height + y;\n                    this.addObjectByIndex(cellIndex, obj);\n                }\n            }\n        }\n    }\n\n    clear() {\n        for (let i = 0; i < this.size; i++) {\n            this.cells[i].clear();\n        }\n    }\n\n    forEach(callback: CollisionGridForEachCallback) {\n        this.cells.forEach((cell, index) => {\n            const pos = this.makeVecFromIndex(index);\n            callback(pos.x, pos.y, cell, index);\n        })\n    }\n\n    hasCell(index, dt) {\n        if (index < 0 || index >= this.size) {\n            return false;\n        }\n\n        const pos = this.makeVecFromIndex(index);\n\n        const x = pos.x;\n        const y = pos.y;\n\n        if (y <= 0 && dt < 0) {\n            // TOP CELL\n            return false;\n        }\n\n        if (y === this.height - 1 && dt > 0) {\n            // Bottom cell\n            return  false;\n        }\n\n        if (x === 0 && dt < 0) {\n            // left cell\n            return false;\n        }\n\n        if (x >= this.width - 1 && dt > 0) {\n            // right cell;\n            return false;\n        }\n\n        return true;\n    }\n}\n","import {Vec2} from \"./vector/vec2\";\nimport {BallsObject} from \"./objects/ball\";\nimport {BaseSolverObject} from \"./objects/object\";\nimport {Constrain} from \"./constrains/constrain\";\nimport {CollisionCell, CollisionGrid} from \"./grid\";\n\nexport class Solver {\n    objects: BaseSolverObject[] = []\n    constrains: Constrain = null;\n    gravity: Vec2 = Vec2.Zero();\n    subSteps: number = 4;\n    useFixedTime: boolean = true;\n    step: number;\n    collisionGrid: CollisionGrid;\n    worldSize: Vec2;\n\n    cellSize: Vec2;\n\n    constructor(worldSize) {\n        this.objects = [];\n        this.worldSize = worldSize.copy();\n\n        this.configure();\n    }\n\n    configure() {\n        this.gravity = new Vec2(0, 100);\n\n        this.useFixedTime = true;\n        this.step = 0.017 / this.subSteps;\n\n        const cellSize = 16;\n\n        const gridX = Math.round(this.worldSize.x / cellSize);\n        const gridY = Math.round(this.worldSize.y / cellSize);\n\n        this.cellSize = new Vec2(\n            this.worldSize.x / gridX,\n            this.worldSize.y / gridY\n        );\n\n        this.collisionGrid = new CollisionGrid(\n            gridX, gridY,\n            this.cellSize\n        )\n    }\n\n    /**\n     *\n     * @param {BallsObject} obj\n     */\n    addObject(obj) {\n        this.objects.push(obj);\n    }\n\n    /**\n     * Update the simulation by given step.\n     * @param {number} time amount of seconds passed since last update.\n     */\n    update(time) {\n        const subTime = this.useFixedTime ? this.step : time / this.subSteps;\n        for (let i = 0; i < this.subSteps; i++) {\n            this.addObjectsToGrid();\n            this.processCollisions();\n            this.applyGravity();\n            this.updateObjects(subTime);\n            this.applyConstrains();\n        }\n    }\n\n    addObjectsToGrid() {\n        this.collisionGrid.clear();\n        this.objects.forEach((obj, index) => {\n            obj.addToGrid(this.collisionGrid);\n        });\n    }\n\n    /**\n     * Update objects state\n     * @param {number} time amount of seconds passed since last update\n     */\n    updateObjects(time) {\n        this.objects.forEach(obj => obj.update(time))\n    }\n\n    applyGravity() {\n        this.objects.forEach(obj => obj.accelerate(this.gravity))\n    }\n\n    applyConstrains() {\n        this.objects.forEach(obj => this.constrains.applyConstrain(obj))\n    }\n\n    processCollisionsInCell(objA: BaseSolverObject, cell: CollisionCell) {\n        cell.objects.forEach(objB => {\n            if (objA === objB) {\n                return;\n            }\n\n            if (objA.immovable && objB.immovable) {\n                return;\n            }\n\n            objA.collide(objB);\n        })\n    }\n\n    processCell(index: number) {\n        this.collisionGrid.cells[index].objects.forEach(objA => {\n            this.processCollisionsInCell(objA, this.collisionGrid.cells[index]); // SELF\n\n            if (this.collisionGrid.hasCell(index, -1)) {\n                this.processCollisionsInCell(objA, this.collisionGrid.cells[index - 1]); // TOP\n            }\n\n            if (this.collisionGrid.hasCell(index, 1)) {\n                this.processCollisionsInCell(objA, this.collisionGrid.cells[index + 1]); // BOTTOM\n            }\n\n            if (this.collisionGrid.hasCell(index + this.collisionGrid.height, -1)) {\n                this.processCollisionsInCell(objA, this.collisionGrid.cells[index + this.collisionGrid.height - 1]); // RIGHT TOP\n            }\n\n            if (this.collisionGrid.hasCell(index + this.collisionGrid.height, 0)) {\n                this.processCollisionsInCell(objA, this.collisionGrid.cells[index + this.collisionGrid.height]); // RIGHT\n            }\n\n            if (this.collisionGrid.hasCell(index + this.collisionGrid.height, 1)) {\n                this.processCollisionsInCell(objA, this.collisionGrid.cells[index + this.collisionGrid.height + 1]); // RIGHT BOTTOM\n            }\n\n            if (this.collisionGrid.hasCell(index - this.collisionGrid.height, -1)) {\n                this.processCollisionsInCell(objA, this.collisionGrid.cells[index - this.collisionGrid.height - 1]); // LEFT TOP\n            }\n\n            if (this.collisionGrid.hasCell(index - this.collisionGrid.height, 0)) {\n                this.processCollisionsInCell(objA, this.collisionGrid.cells[index - this.collisionGrid.height]); // LEFT\n            }\n\n            if (this.collisionGrid.hasCell(index - this.collisionGrid.height, 1)) {\n                this.processCollisionsInCell(objA, this.collisionGrid.cells[index - this.collisionGrid.height + 1]); // LEFT BOTTOM\n            }\n        })\n    }\n\n    processCollisions() {\n        for (let index = 0; index < this.collisionGrid.size; index++) {\n            this.processCell(index);\n        }\n    }\n}\n\nfunction makeKey(obj1, obj2) {\n    return [obj1.index, obj2.index].sort().join('-');\n}","import {Item} from \"./item\";\nimport {Vec2} from \"../vector/vec2\";\n\nexport class Rect extends Item {\n    size = Vec2.Zero();\n    color = '#00ff00';\n\n    constructor(context, position, size, color) {\n        super(context, position);\n\n        this.size = size;\n\n        if (color) {\n            this.color = color;\n        }\n    }\n\n    render() {\n        this.context.fillStyle = this.color;\n        this.context.fillRect(\n            this.position.x,\n            this.position.y,\n            this.position.x + this.size.x,\n            this.position.y + this.size.y\n        )\n    }\n}","export class RenderableObject {\n    /**\n     * @type {BallsObject}\n     */\n    ballsObject = null;\n\n    /**\n     * @type {Item}\n     */\n    renderItem = null;\n\n    constructor(ballsObject, renderItem) {\n        this.ballsObject = ballsObject;\n        this.renderItem = renderItem;\n    }\n\n    update() {\n        this.renderItem.position = this.ballsObject.currentPosition;\n    }\n\n    render() {\n        this.update();\n        this.renderItem.render();\n    }\n}","import {BallsObject} from \"./ball\";\nimport {SolverObjectTypes} from \"./types\";\nimport {CollisionGrid} from \"../grid\";\nimport {SQRT2} from \"../vector/math\";\nimport {Vec2} from \"../vector/vec2\";\n\nexport class ImmovableBallsObject extends BallsObject {\n    type = SolverObjectTypes.TypeImmovableBall;\n    immovable = true;\n    bounceValue = 0.5;\n\n    /**\n     * @type {Vec2}\n     * @private\n     */\n    _fixedPosition = null;\n\n    /**\n     * @param {Vec2} position\n     * @param {number} [radius]\n     */\n    constructor(position, radius) {\n        super(position, radius);\n        this._fixedPosition = position.copy();\n    }\n\n    update(step) {\n        this.currentPosition = this._fixedPosition;\n        this.previousPosition = this._fixedPosition;\n    }\n\n    addToGrid(collisionGrid: CollisionGrid) {\n        const vec = new Vec2(\n            this.radius * SQRT2,\n            this.radius * SQRT2\n        )\n\n        const leftTop = this.currentPosition.sum(vec);\n        const rightBottom = this.currentPosition.diff(vec);\n\n        collisionGrid.addObjectToCells(\n            leftTop,\n            rightBottom,\n            this\n        );\n    }\n}","import {RenderableObject} from \"./object\";\n\nexport class ImmovableLineRenderableObject extends RenderableObject {\n    /**\n     * @type {ImmovableLineObject}\n     */\n    ballsObject = null;\n\n    constructor(ballsObject, renderItem) {\n        super(ballsObject);\n        this.ballsObject = ballsObject;\n        this.renderItem = renderItem;\n    }\n\n    update() {\n        super.update();\n        this.renderItem.direction = this.ballsObject._direction;\n    }\n}","import { BallsObject } from \"./ball\";\nimport { Vec2Line } from \"../vector/vec2Line\";\nimport {SolverObjectTypes} from \"./types\";\nimport {CollisionGrid} from \"../grid\";\n\nexport class ImmovableLineObject extends BallsObject {\n    _direction;\n    _line;\n\n    type = SolverObjectTypes.TypeImmovableLine;\n    immovable = true;\n\n    constructor(position, direction) {\n        super(position, 0);\n        this._direction = direction;\n\n        this._line = new Vec2Line(\n            this.currentPosition.copy(),\n            this.currentPosition.copy().sum(this._direction)\n        )\n    }\n\n    update(step) {\n        this.currentPosition = this._line._vec1;\n        this.previousPosition = this._line._vec2;\n    }\n\n    addToGrid(collisionGrid: CollisionGrid) {\n        collisionGrid.addObjectToCells(\n            this._line._vec1,\n            this._line._vec2,\n            this\n        );\n    }\n\n}","import {Item} from \"./item\";\nimport {Vec2} from \"../vector/vec2\";\n\nexport class Line extends Item {\n    direction = Vec2.Zero();\n    color = '#00ff00';\n\n    constructor(context, position, direction, color) {\n        super(context, position);\n\n        this.direction = direction;\n\n        if (color) {\n            this.color = color;\n        }\n    }\n\n    render() {\n        this.context.strokeStyle = this.color;\n        this.context.beginPath(); // Start a new path\n        this.context.moveTo(this.position.x, this.position.y);\n        this.context.lineTo(\n            this.position.x + this.direction.x,\n            this.position.y + this.direction.y\n        );\n        this.context.stroke(); // Render the path\n    }\n}","import {Circle} from \"./circle\";\n\nexport class CircleWithText extends Circle {\n    text = '';\n    textColor = '#ffffff';\n\n    constructor(context, position,r, color, text, textColor) {\n        super(context, position, r, color);\n        this.text = text;\n        if (textColor) {\n            this.textColor = textColor;\n        }\n    }\n\n    render() {\n        super.render();\n        this.context.fillStyle = this.textColor;\n        this.context.textBaseline = \"middle\";\n        this.context.textAlign = \"center\";\n        this.context.fillText(this.text, this.position.x, this.position.y);\n    }\n}","import {Rect} from \"./rect\";\n\nexport class Frame extends Rect {\n    constructor(context, position, size, color) {\n        super(context, position, size, color);\n    }\n\n    render() {\n        this.context.strokeStyle = this.color;\n        this.context.strokeRect(\n            this.position.x,\n            this.position.y,\n            this.size.x,\n            this.size.y\n        )\n    }\n\n    queue() {\n\n    }\n}","import {Circle} from \"./items/circle\";\nimport {Vec2} from \"./vector/vec2\";\nimport {Vec2Math} from \"./vector/vec2Math\";\nimport {BallsObject} from \"./objects/ball\";\nimport {ViewportConstrain} from \"./constrains/viewport\";\nimport {CircleConstrain} from \"./constrains/circle\";\nimport {MappedObjectGeneratorItem, MappedObjectsGenerator} from \"./mappedObjectsGenerator\";\nimport {TotalObjectsGenerator} from \"./totalObjectsGenerator\";\nimport {Solver} from \"./solver\";\nimport {Rect} from \"./items/rect\";\nimport {RenderableObject} from \"./renderableObjects/object\";\nimport {ImmovableBallsObject} from \"./objects/immovableBall\";\nimport {ImmovableLineRenderableObject} from \"./renderableObjects/immovableLine\";\nimport {ImmovableLineObject} from \"./objects/immovableLine\";\nimport {Line} from \"./items/line\";\nimport {CircleWithText} from \"./items/circleWithText\";\nimport {Frame} from \"./items/frame\";\n\nconst balls = [\n    new MappedObjectGeneratorItem(\n        1,\n        new BallsObject(new Vec2(10, 10))\n    ),\n    new MappedObjectGeneratorItem(\n        2,\n        new BallsObject(new Vec2(10, 10))\n    ),\n    new MappedObjectGeneratorItem(\n        3,\n        new BallsObject(new Vec2(10, 10))\n    ),\n]\n\nconst milkShakePoints = [\n    new Vec2(0, 0),\n    new Vec2(70, 380),\n    new Vec2(270, 380),\n    new Vec2(340, 0)\n]\n\nconst milkShakeLines = [\n    [milkShakePoints[0], Vec2Math.diff(milkShakePoints[0], milkShakePoints[1]).flipSelf()],\n    [milkShakePoints[1], Vec2Math.diff(milkShakePoints[1], milkShakePoints[2]).flipSelf()],\n    [milkShakePoints[2], Vec2Math.diff(milkShakePoints[2], milkShakePoints[3]).flipSelf()]\n]\n\nconst ballsColors = {\n    57: '#ffffff',\n    78: '#ffffff',\n    71: '#ffffff',\n    86: '#ffffff',\n    200: '#ffffff',\n    202: '#ffffff',\n    218: '#ffffff',\n}\n\nfunction index2color(index) {\n    const frequency=5/1000;\n    const r = Math.floor(Math.sin(frequency*index + 0) * (127) + 128);\n    const g = Math.floor(Math.sin(frequency*index + 2) * (127) + 128);\n    const b = Math.floor(Math.sin(frequency*index + 4) * (127) + 128);\n    return `rgba(${r}, ${g}, ${b}, 1)`;\n}\n\nexport class Render {\n    /**\n     * List of balls\n     * @type {RenderableObject[]}\n     */\n    objects = []\n\n    /**\n     * @type {Constrain}\n     */\n    constrains = null;\n\n    /**\n     * Solver for physics\n     * @type {Solver}\n     */\n    solver = null;\n\n    constructor(canvas) {\n        this.canvas = canvas;\n        this.context = this.canvas.getContext(\"2d\");\n\n        this.timeRenderStart = performance.now();\n        this.timeRenderEnd = performance.now();\n        this.step = 0;\n\n        /**\n         * @type {RenderableObject[]}\n         */\n        this.objects = [];\n\n        this.items = [];\n\n        this.generator = null;\n        this.solver = null\n\n        this.redBall = null;\n\n        this.configure();\n    }\n\n    configure() {\n        this.solver = new Solver(\n            new Vec2(\n                this.canvas.width,\n                this.canvas.height\n            )\n        );\n\n        this.context.font = '10px serif';\n\n        //this.switchToCircleConstrain();\n        this.switchToViewportConstrain();\n        this.solver.constrains = this.constrains;\n\n        const canvasCenter = new Vec2(\n            this.canvas.width / 2,\n            this.canvas.height / 2\n        );\n\n        const ballGeneratorPoint = canvasCenter.diff(\n            new Vec2(\n                300,\n                300\n            )\n        )\n        const ballVelocity = new Vec2(\n            2, -2\n        ).mul(1/this.solver.subSteps);\n\n        this.generator = new TotalObjectsGenerator(\n            this.solver,\n            1000,\n            7,\n            (index) => {\n                const obj = new RenderableObject(\n                    (new BallsObject(\n                        ballGeneratorPoint,\n                        5\n                    )).setVelocity(ballVelocity),\n                    new CircleWithText(\n                        this.context,\n                        Vec2.Zero(),\n                        7,\n                        index2color(index+200),\n                        '',\n                        '#000000'\n                    )\n                )\n\n                const obj2 = new RenderableObject(\n                    (new BallsObject(\n                        ballGeneratorPoint.sum(\n                            Vec2.Down(20)\n                        ),\n                        5\n                    )).setVelocity(ballVelocity),\n                    new CircleWithText(\n                        this.context,\n                        Vec2.Zero(),\n                        7,\n                        index2color(index+100),\n                        '',\n                        '#000000'\n                    )\n                )\n\n                const obj3 = new RenderableObject(\n                    (new BallsObject(\n                        ballGeneratorPoint.sum(\n                            Vec2.Down(-20)\n                        ),\n                        5\n                    )).setVelocity(ballVelocity),\n                    new CircleWithText(\n                        this.context,\n                        Vec2.Zero(),\n                        7,\n                        index2color(index),\n                        '',\n                        '#000000'\n                    )\n                )\n\n                return [obj,obj2, obj3];\n            }\n        );\n\n        this.redBall = new RenderableObject(\n            new ImmovableBallsObject(new Vec2(230, 50), 30),\n            new Circle(this.context, Vec2.Zero(), 30, '#ff0000')\n        );\n\n        this.addObject(this.redBall);\n\n        milkShakeLines.forEach(line => {\n            this.addObject(new ImmovableLineRenderableObject(\n                new ImmovableLineObject(\n                    line[0].sum(\n                        canvasCenter.diff(new Vec2(340/2, 380/2))\n                    ),\n                    line[1]\n                ),\n                new Line(\n                    this.context,\n                    Vec2.Zero(),\n                    Vec2.Zero(),\n                    '#ffffff'\n                )\n            ));\n        });\n    }\n\n    processUserInput(event) {\n        if (event.leftButtonDown) {\n            if (this.redBall.ballsObject.isPointInsideObject(\n                new Vec2(\n                    event.screenX,\n                    event.screenY\n                )\n            )) {\n                this.canMoveRedObject = true;\n            }\n\n            if (this.canMoveRedObject) {\n                this.redBall.ballsObject.moveBy(\n                    new Vec2(\n                        event.dx,\n                        event.dy\n                    )\n                )\n            }\n        } else {\n            this.canMoveRedObject = false;\n        }\n    }\n\n    /**\n     * @param {RenderableObject} obj\n     */\n    addObject(obj) {\n        this.objects.push(obj);\n        this.solver.addObject(obj.ballsObject);\n    }\n\n    update(time) {\n        this.solver.update(time);\n    }\n\n    generatorsTick(time) {\n        const newBalls = this.generator.getNextObject(time);\n        if (newBalls) {\n            newBalls.forEach(ball => this.addObject(ball));\n        }\n    }\n\n    tick() {\n        if (this.step < 0) {\n            this.step = 0;\n        }\n\n        this.generatorsTick(this.step / 1000);\n        this.update(this.step / 1000);\n\n        this.clear();\n        this.renderItems();\n        //this.renderGrid();\n\n        this.printFPS();\n\n        Vec2.lengthCallsCount = 0;\n    }\n\n    nextFrame = (time) => {\n        this.step = time - this.timeRenderEnd;\n        if (this.step < 0) {\n            this.step = 0;\n        }\n\n        this.tick();\n\n        this.timeRenderEnd = time;\n        self.requestAnimationFrame(this.nextFrame);\n    }\n\n    nextInterval = () => {\n        this.timeRenderStart = performance.now()\n        this.step = this.timeRenderStart - this.timeRenderEnd;\n\n        if (this.step < 0) {\n            this.step = 0;\n        }\n\n        this.tick();\n\n        this.timeRenderEnd = performance.now();\n    }\n\n    renderItems() {\n        this.items.forEach(item => item.render());\n        this.objects.forEach(obj => obj.render());\n    }\n\n    printText(text, x, y) {\n        this.context.fillStyle = \"#ffffff\";\n        this.context.textAlign = \"start\";\n        this.context.fillText(text, x, y);\n    }\n\n    printFPS() {\n        this.context.fillStyle = 'rgba(0,0,0,0.1)';\n        this.context.fillRect(0, 0, 100, 60);\n        this.printText(`${Math.round(this.step)} ms / ${Math.round(1000/this.step)} FPS`, 0, 10);\n        this.printText(`Length calls: ${Vec2.lengthCallsCount}`, 0 , 20);\n        this.printText(`Lenght2 calls: ${Vec2.length2CallsCount}`, 0 , 30);\n        this.printText(`Objects: ${this.objects.length}`, 0, 40);\n        this.printText(`Compares per object: ${Math.round(Vec2.lengthCallsCount / this.objects.length)}`, 0, 50);\n    }\n\n    clear() {\n        this.context.fillStyle = \"rgba(0, 0, 0, 0.9)\";\n        this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n    }\n\n    start() {\n        if (self.requestAnimationFrame) {\n            self.requestAnimationFrame(this.nextFrame);\n        } else {\n            setInterval(this.nextInterval, 16)\n        }\n    }\n\n    renderGrid() {\n        this.solver.collisionGrid.forEach((column, row, cell, index) => {\n            const cellPosition = new Vec2(\n                column * this.solver.cellSize.x,\n                row * this.solver.cellSize.y,\n            );\n            const rect = new Frame(\n                this.context,\n                cellPosition,\n                this.solver.cellSize.diff(new Vec2(5, 5)),\n                cell.count > 0 ? '#ff0000' : '#00ff00'\n            )\n\n            if (cell.highlight) {\n                this.context.lineWidth = 10;\n            }\n\n            rect.render();\n\n            this.context.lineWidth = 1;\n            this.printText(\n                index,\n                cellPosition.x + this.solver.cellSize.x / 2,\n                cellPosition.y + this.solver.cellSize.y / 2\n            )\n        })\n    }\n\n    switchToCircleConstrain() {\n        this.constrains = new CircleConstrain(\n            new Vec2(this.canvas.width / 2, this.canvas.height / 2),\n            this.canvas.height / 2\n        )\n\n        this.items.push(\n            new Circle(\n                this.context,\n                this.canvas.width / 2,\n                this.canvas.height / 2,\n                this.canvas.height / 2,\n                '#000000'\n            )\n        );\n    }\n\n    switchToViewportConstrain() {\n        this.constrains = new ViewportConstrain(this.canvas.width, this.canvas.height)\n        // this.items.push(\n        //     new Rect(\n        //         this.context,\n        //         Vec2.Zero(),\n        //         new Vec2(\n        //             this.canvas.width,\n        //             this.canvas.height\n        //         ),\n        //         '#000000'\n        //     )\n        // );\n    }\n}","import {Render} from \"../render\";\nimport {UIEvent, UserInput} from \"./input\";\n\nexport class DirectApplication {\n    render;\n    userInput;\n\n    constructor(canvas) {\n        this.render = new Render(canvas);\n        this.render.start();\n\n        this.userInput = new UserInput(canvas);\n        this.userInput.addHandler(this.sendUserInputEvent);\n    }\n\n    sendUserInputEvent = (event) => {\n        this.render.processUserInput(event)\n    }\n}","import { onReady }  from \"../utils/onReady\";\nimport { getElement } from \"../utils/getElement\";\n\nimport {WorkerApplication} from \"./worker\";\nimport {DirectApplication} from \"./direct\";\n\nfunction initApplication() {\n    console.log('Init application');\n    /**\n     * @var {HTMLCanvasElement}\n     */\n    const canvas = getElement(\"#image_canvas\");\n    const container = getElement('#container');\n    canvas.width = container.offsetWidth;\n    canvas.height = container.offsetHeight;\n\n    if (canvas.transferControlToOffscreen) {\n        console.log('Render in worker');\n        const application = new WorkerApplication(canvas);\n    } else {\n        // There is no support for offscreen render\n        console.log('Render in main thread');\n        const application = new DirectApplication(canvas);\n    }\n}\n\nonReady(initApplication);"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$8a42e5d5abfdc424$var$DOCUMENT_STATE_LOADING","$1fdac2036baae513$export$9a8db54f22040fa8","$1fdac2036baae513$export$d16800b7e59a8051","selector","element","document","querySelector","$bb9a5d09fff8458d$export$2e2bcd8739ae039","obj","key","value","defineProperty","enumerable","configurable","writable","$4c3c3def41bff24a$export$3ac5e585cf392ee0","addHandlers","this","_canvas","addEventListener","mouseEnter","mouseLeave","mouseMove","mouseDown","mouseUp","click","removeHandlers","processEvent","event","_handlers","forEach","callback","addHandler","add","removeHandler","has","delete","createMouseEvent","browserEvent","screenX","offsetX","screenY","offsetY","dx","_oldX","dy","_oldY","leftButtonDown","_leftButtonDown","constructor","canvas","Set","$cfc619e94ff51e3f$exports","workerUrl","origin","isESM","self","location","source","stringify","URL","createObjectURL","Blob","type","$3b9d1290c4a59f83$export$80edbf15fa61a4db","$db8638db384bfa05$var$url","resolve","url","MessageType","$db8638db384bfa05$exports","toString","$3b9d1290c4a59f83$export$fbae1a0d0e7e2437","MessageNone","$3b9d1290c4a59f83$export$fd1648b71482b662","super","MessageInit","$3b9d1290c4a59f83$export$45b98a991719aa36","MessageUserInput","$3b9d1290c4a59f83$export$6bb4378561ad428b","initUserInput","worker","postMessage","Worker","offscreen","transferControlToOffscreen","userInput","sendUserInputEvent","$459fb0a8ec8bcd7c$export$79992de41895b472","$459fb0a8ec8bcd7c$export$98e05f023e6bbbeb","$459fb0a8ec8bcd7c$export$cc5bbfba1d12de75","$b4286c963bff21ce$export$92b0492af2e4b152","static","vec1","vec2","$00c8a36acdca46b7$export$ac4bca90992eed1","x","y","scalar","diff","length2","line1","line2","K","isNaN","makeVec2FromX","_vec1","B","vec","line","normal","direction","perpendicular","mul","dot","$26f978d279431b93$export$9201df218db36553","$26f978d279431b93$export$3681641e15b6e2c3","Math","sqrt","_x","_y","_length","lengthCallsCount","_length2","length2CallsCount","addSelf","subSelf","flipYSelf","flipXSelf","flipSelf","equals","distance2","sum","copy","applySelf","ort","l","Horizontal","Vertical","$ac411b27688e0230$export$6d08773d2e66f8f2","render","queue","context","position","Zero","$862240837b78d20e$export$c89a927ffc67e6fa","beginPath","arc","r","PI","fillStyle","color","fill","$a9e45ba1d69ffacf$export$769818a274da100a","inBetween","_vec2","a","b","error","abs","calculateKB","_b","_k","NaN","moveBy","getPointProjection","cosabD","_direction","_ort","Number","MAX_SAFE_INTEGER","$9185eb299320cede$export$a59432db1b5f15cd","SolverObjectTypes","$0755b85fc87973c5$export$98e6d07575f46913","obj1","obj2","flipped","$0755b85fc87973c5$var$flipObjects","TypeBall","between","currentPosition","distance","requiredDistance","radius","normalized","delta","bounceValue","$0755b85fc87973c5$export$23e74c69ee7b6dae","TypeImmovableBall","ball","immovable","$0755b85fc87973c5$export$6d6f4258faab0992","TypeImmovableLine","projectionPoint","_line","e","$0755b85fc87973c5$export$4d790f09e0e06cd9","$d6317ada4f40318e$export$8387ea1f2c3d2dbf","update","step","accelerate","acc","collide","addToGrid","collisionGrid","TypeNull","index","$f725ec4af34641ef$export$e4134913c977dac4","velocity","previousPosition","setVelocity","vel","addObject","floor","isPointInsideObject","point","v","movementVector","undefined","$4b97689a079fa103$export$504c072c1a75a697","applyConstrain","$00201ec98320169b$export$29fb847bec292dd0","width","_width","height","_height","$55d69f42c54bcd4a$export$4384cf344d141b50","toCenter","center","n","$20512bacb769fb3e$export$780b62e628ec518f","getNextObject","solver","$de78521780c1d605$export$cf86583e2e1a386b","timeout","object","$626d113ba09163cc$export$a16316d22a718d27","total","limit","lastCreateTime","delay","newItems","create","count","createCallback","$46a76f963c7cc5db$export$e172ac46f8971d96","objects","MAX_OBJECT_IN_CELL","push","clear","highlight","remove","objectIndex","findIndex","splice","$46a76f963c7cc5db$export$82d945040ef2d6e1","size","_size","w","resize","h","cells","worldX","worldY","cellSize","addObjectByIndex","makeIndexFromVec","makeIndexFromCoord","makeVecFromIndex","addObjectToCells","worldLeftTop","worldRightBottom","point1","scale","point2","index1","index2","cellIndex","left","min","top","right","max","startFrom","cell","pos","hasCell","dt","$5e07931470908905$export$cca492cadf45c096","configure","gravity","useFixedTime","subSteps","gridX","round","worldSize","gridY","time","subTime","addObjectsToGrid","processCollisions","applyGravity","updateObjects","applyConstrains","constrains","processCollisionsInCell","objA","objB","processCell","$13f1a36200857cbe$export$c79fc6492f3af13d","fillRect","$da117db74631a5a9$export$c682e94218fd2425","renderItem","ballsObject","$aba146bcfc627cd8$export$231acc6c5e36d927","_fixedPosition","leftTop","rightBottom","$e49b4ba0f9c8089a$export$d17c9f1e24f0afb0","$15d0ee54ab94ab04$export$35284351ee95db01","$00d306546736e72e$export$17d680238e50603e","strokeStyle","moveTo","lineTo","stroke","$3fdf4f031363924a$export$d56a2681f508d897","textColor","textBaseline","textAlign","fillText","text","$b54965c0904d6775$export$b89a827e9254211a","strokeRect","$b782825b1529bae2$var$milkShakePoints","$b782825b1529bae2$var$milkShakeLines","$b782825b1529bae2$var$index2color","frequency","sin","$b782825b1529bae2$export$160ae30d75f98247","font","switchToViewportConstrain","canvasCenter","ballGeneratorPoint","ballVelocity","generator","Down","redBall","processUserInput","canMoveRedObject","generatorsTick","newBalls","tick","renderItems","printFPS","items","item","printText","start","requestAnimationFrame","nextFrame","setInterval","nextInterval","renderGrid","column","row","cellPosition","rect","lineWidth","switchToCircleConstrain","timeRenderEnd","timeRenderStart","performance","now","getContext","$45c78095b8c39fc4$export$a712f6800434119d","console","log","container","offsetWidth","offsetHeight","readyState"],"version":3,"file":"index.90e54952.js.map"}