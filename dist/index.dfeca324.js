function t(t,e,i,s){Object.defineProperty(t,e,{get:i,set:s,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},s={},n=e.parcelRequire62ee;null==n&&((n=function(t){if(t in i)return i[t].exports;if(t in s){var e=s[t];delete s[t];var n={id:t,exports:{}};return i[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){s[t]=e},e.parcelRequire62ee=n),n.register("kyEFX",(function(e,i){var s,n;t(e.exports,"register",(function(){return s}),(function(t){return s=t})),t(e.exports,"resolve",(function(){return n}),(function(t){return n=t}));var r={};s=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)r[e[i]]=t[e[i]]},n=function(t){var e=r[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),n("kyEFX").register(JSON.parse('{"GHvDZ":"index.dfeca324.js","gVigP":"main.9427a235.js"}'));const r="loading";class o extends Error{}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class a{render(){}constructor(t){this.context=t}}class c extends a{render(){this.context.beginPath(),this.context.arc(this.x,this.y,this.r,0,2*Math.PI),this.context.fillStyle=this.color,this.context.fill()}constructor(t,e,i,s,n){super(t),h(this,"x",0),h(this,"y",0),h(this,"r",0),h(this,"color","#00ff00"),this.x=e,this.y=i,this.r=s,n&&(this.color=n)}}class u{add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}flipY(){return this.y=-this.y,this}sum(t){return new u(this.x+t.x,this.y+t.y)}diff(t){return new u(this.x-t.x,this.y-t.y)}mul(t){return new u(this.x*t,this.y*t)}copy(){return new u(this.x,this.y)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}get normalized(){const t=this.length;return new u(this.x/t,this.y/t)}static Zero(){return new u(0,0)}constructor(t,e){h(this,"x",0),h(this,"y",0),this.x=t,this.y=e}}class l{static diff(t,e){return new u(t.x-e.x,t.y-e.y)}static mul(t,e){return new u(t.x*e,t.y*e)}}class d{update(t){const e=this.currentPosition.diff(this.previousPosition);this.previousPosition=this.currentPosition.copy(),this.currentPosition.add(e.add(this.acc.mul(t*t))),this.acc=u.Zero()}accelerate(t){this.acc.add(t)}collide(t){const e=l.diff(this.currentPosition,t.currentPosition),i=e.length,s=this.radius+t.radius;if(i<this.radius+t.radius){const n=e.normalized,r=s-i;this.currentPosition.add(l.mul(n,this.radius/s*r*this.bounceValue)),t.currentPosition.sub(l.mul(n,t.radius/s*r*t.bounceValue))}}get velocity(){return this.currentPosition.diff(this.previousPosition)}set velocity(t){this.previousPosition=l.diff(this.currentPosition,t)}constructor(t){h(this,"previousPosition",u.Zero()),h(this,"currentPosition",u.Zero()),h(this,"acc",u.Zero()),h(this,"radius",10),h(this,"bounceValue",1),this.previousPosition=t,this.currentPosition=t}}class f{applyConstrain(t){}constructor(){}}class p extends f{applyConstrain(t){super.applyConstrain(t);const e=t.currentPosition.diff(this.center),i=e.length,s=t.radius;if(i>this.radius-s){const i=e.normalized;t.currentPosition=this.center.sum(i.mul(this.radius-s*t.bounceValue))}}constructor(t,e){super(),h(this,"center",u.Zero()),h(this,"radius",0),this.center=t,this.radius=e}}class y{getNextObject(t){return null}constructor(){}}class m{constructor(t,e){h(this,"timeout",void 0),h(this,"object",void 0),this.timeout=t,this.object=e}}class x extends y{getNextObject(t){if(!(this.total>this.limit)&&(this.lastCreateTime+=t,this.lastCreateTime>this.delay)){const t=this.create();return this.lastCreateTime=0,this.total++,t}}constructor(t,e,i){super(),this.limit=t,this.total=0,this.delay=e,this.create=i,this.lastCreateTime=0}}new m(1,new d(new u(10,10))),new m(2,new d(new u(10,10))),new m(3,new d(new u(10,10)));class g{configure(){this.context.font="10px serif",this.gravity=new u(0,100),this.constrains=new p(new u(this.canvas.width/2,this.canvas.height/2),this.canvas.height/2),this.items.push(new c(this.context,this.canvas.width/2,this.canvas.height/2,this.canvas.height/2,"#000000")),this.generator=new x(200,.2,(()=>{const t=new d(new u(this.canvas.width/2,this.canvas.height/2));return t.velocity=new u(5,-1),t.radius=20*Math.random()+5,t}))}update(t){const e=this.generator.getNextObject(t);e&&this.objects.push(e),this.applyGravity(),this.applyConstrains(),this.processCollisions(),this.objects.forEach((e=>e.update(t)))}tick(){this.step<0&&(this.step=0),this.update(this.step/1e3),this.clear(),this.renderItems(),this.printFPS()}applyGravity(){this.objects.forEach((t=>t.accelerate(this.gravity)))}applyConstrains(){this.objects.forEach((t=>this.constrains.applyConstrain(t)))}processCollisions(){this.objects.forEach((t=>{this.objects.forEach((e=>{t!==e&&t.collide(e)}))}))}renderItems(){this.items.forEach((t=>t.render())),this.objects.forEach((t=>{new c(this.context,t.currentPosition.x,t.currentPosition.y,t.radius).render()}))}printText(t,e,i){this.context.fillStyle="#000000",this.context.fillText(t,e,i)}printFPS(){this.printText(`${Math.round(this.step)} ms / ${Math.round(1e3/this.step)} FPS`,0,10)}clear(){this.context.fillStyle="#ffffff",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)}start(){self.requestAnimationFrame?self.requestAnimationFrame(this.nextFrame):setInterval(this.nextInterval,16)}constructor(t){h(this,"objects",[]),h(this,"constrains",null),h(this,"nextFrame",(t=>{this.step=t-this.timeRenderEnd,this.step<0&&(this.step=0),this.tick(),this.timeRenderEnd=t,self.requestAnimationFrame(this.nextFrame)})),h(this,"nextInterval",(()=>{this.timeRenderStart=performance.now(),this.step=this.timeRenderStart-this.timeRenderEnd,this.step<0&&(this.step=0),this.tick(),this.timeRenderEnd=performance.now()})),this.canvas=t,this.context=this.canvas.getContext("2d"),this.timeRenderStart=performance.now(),this.timeRenderEnd=performance.now(),this.step=0,this.gravity=u.Zero(),this.items=[],this.objects=[],this.generator=null,this.configure()}}var v,w={};v=function(t,e,i){if(e===self.location.origin)return t;var s=i?"import "+JSON.stringify(t)+";":"importScripts("+JSON.stringify(t)+");";return URL.createObjectURL(new Blob([s],{type:"application/javascript"}))};let b=new URL(n("kyEFX").resolve("gVigP"),import.meta.url);var P;w=v(b.toString(),b.origin,!0),P=function(){console.log("Init application");const t=function(t){const e=document.querySelector(t);if(!e)throw new o(t);return e}("#image_canvas");if(t.transferControlToOffscreen){console.log("Render in worker");const e=new Worker(w),i=t.transferControlToOffscreen();e.postMessage({canvas:i},[i])}else console.log("Render in main thread"),new g(t).start()},document.readyState!==r?P():document.addEventListener("DOMContentLoaded",P);
//# sourceMappingURL=index.dfeca324.js.map
