!function(){function t(t,e,i,s){Object.defineProperty(t,e,{get:i,set:s,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},s={},r=e.parcelRequire62ee;null==r&&((r=function(t){if(t in i)return i[t].exports;if(t in s){var e=s[t];delete s[t];var r={id:t,exports:{}};return i[t]=r,e.call(r.exports,r,r.exports),r.exports}var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){s[t]=e},e.parcelRequire62ee=r),r.register("iE7OH",(function(e,i){var s,r;t(e.exports,"register",(function(){return s}),(function(t){return s=t})),t(e.exports,"resolve",(function(){return r}),(function(t){return r=t}));var n={};s=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)n[e[i]]=t[e[i]]},r=function(t){var e=n[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),r("iE7OH").register(JSON.parse('{"5d7Nu":"index.2acb17fb.js","gVigP":"main.9427a235.js"}'));const n="loading";class o extends Error{}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class a{render(){}constructor(t){this.context=t}}class c extends a{render(){this.context.beginPath(),this.context.arc(this.x,this.y,this.r,0,2*Math.PI),this.context.fillStyle=this.color,this.context.fill()}constructor(t,e,i,s,r){super(t),h(this,"x",0),h(this,"y",0),h(this,"r",0),h(this,"color","#00ff00"),this.x=e,this.y=i,this.r=s,r&&(this.color=r)}}class u{add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}flipY(){return this.y=-this.y,this}sum(t){return new u(this.x+t.x,this.y+t.y)}diff(t){return new u(this.x-t.x,this.y-t.y)}mul(t){return new u(this.x*t,this.y*t)}copy(){return new u(this.x,this.y)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}get normalized(){const t=this.length;return new u(this.x/t,this.y/t)}static Zero(){return new u(0,0)}constructor(t,e){h(this,"x",0),h(this,"y",0),this.x=t,this.y=e}}class l{static diff(t,e){return new u(t.x-e.x,t.y-e.y)}static mul(t,e){return new u(t.x*e,t.y*e)}}class d{update(t){const e=this.currentPosition.diff(this.previousPosition);this.previousPosition=this.currentPosition.copy(),this.currentPosition.add(e.add(this.acc.mul(t*t))),this.acc=u.Zero()}accelerate(t){this.acc.add(t)}collide(t){const e=l.diff(this.currentPosition,t.currentPosition),i=e.length,s=this.radius+t.radius;if(i<this.radius+t.radius){const r=e.normalized,n=s-i;this.currentPosition.add(l.mul(r,this.radius/s*n*this.bounceValue)),t.currentPosition.sub(l.mul(r,t.radius/s*n*t.bounceValue))}}get velocity(){return this.currentPosition.diff(this.previousPosition)}set velocity(t){this.previousPosition=l.diff(this.currentPosition,t)}constructor(t){h(this,"previousPosition",u.Zero()),h(this,"currentPosition",u.Zero()),h(this,"acc",u.Zero()),h(this,"radius",10),h(this,"bounceValue",1),this.previousPosition=t,this.currentPosition=t}}class f{applyConstrain(t){}constructor(){}}class p extends f{applyConstrain(t){super.applyConstrain(t);const e=t.currentPosition.diff(this.center),i=e.length,s=t.radius;if(i>this.radius-s){const i=e.normalized;t.currentPosition=this.center.sum(i.mul(this.radius-s*t.bounceValue))}}constructor(t,e){super(),h(this,"center",u.Zero()),h(this,"radius",0),this.center=t,this.radius=e}}class m{getNextObject(t){return null}constructor(){}}class x{constructor(t,e){h(this,"timeout",void 0),h(this,"object",void 0),this.timeout=t,this.object=e}}class y extends m{getNextObject(t){if(!(this.total>this.limit)&&(this.lastCreateTime+=t,this.lastCreateTime>this.delay)){const t=this.create();return this.lastCreateTime=0,this.total++,t}}constructor(t,e,i){super(),this.limit=t,this.total=0,this.delay=e,this.create=i,this.lastCreateTime=0}}new x(1,new d(new u(10,10))),new x(2,new d(new u(10,10))),new x(3,new d(new u(10,10)));class w{configure(){this.context.font="10px serif",this.gravity=new u(0,100),this.constrains=new p(new u(this.canvas.width/2,this.canvas.height/2),this.canvas.height/2),this.items.push(new c(this.context,this.canvas.width/2,this.canvas.height/2,this.canvas.height/2,"#000000")),this.generator=new y(200,.2,(()=>{const t=new d(new u(this.canvas.width/2,this.canvas.height/2));return t.velocity=new u(5,-1),t.radius=20*Math.random()+5,t}))}update(t){const e=this.generator.getNextObject(t);e&&this.objects.push(e),this.applyGravity(),this.applyConstrains(),this.processCollisions(),this.objects.forEach((e=>e.update(t)))}tick(){this.step<0&&(this.step=0),this.update(this.step/1e3),this.clear(),this.renderItems(),this.printFPS()}applyGravity(){this.objects.forEach((t=>t.accelerate(this.gravity)))}applyConstrains(){this.objects.forEach((t=>this.constrains.applyConstrain(t)))}processCollisions(){this.objects.forEach((t=>{this.objects.forEach((e=>{t!==e&&t.collide(e)}))}))}renderItems(){this.items.forEach((t=>t.render())),this.objects.forEach((t=>{new c(this.context,t.currentPosition.x,t.currentPosition.y,t.radius).render()}))}printText(t,e,i){this.context.fillStyle="#000000",this.context.fillText(t,e,i)}printFPS(){this.printText(`${Math.round(this.step)} ms / ${Math.round(1e3/this.step)} FPS`,0,10)}clear(){this.context.fillStyle="#ffffff",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)}start(){self.requestAnimationFrame?self.requestAnimationFrame(this.nextFrame):setInterval(this.nextInterval,16)}constructor(t){h(this,"objects",[]),h(this,"constrains",null),h(this,"nextFrame",(t=>{this.step=t-this.timeRenderEnd,this.step<0&&(this.step=0),this.tick(),this.timeRenderEnd=t,self.requestAnimationFrame(this.nextFrame)})),h(this,"nextInterval",(()=>{this.timeRenderStart=performance.now(),this.step=this.timeRenderStart-this.timeRenderEnd,this.step<0&&(this.step=0),this.tick(),this.timeRenderEnd=performance.now()})),this.canvas=t,this.context=this.canvas.getContext("2d"),this.timeRenderStart=performance.now(),this.timeRenderEnd=performance.now(),this.step=0,this.gravity=u.Zero(),this.items=[],this.objects=[],this.generator=null,this.configure()}}var v,g,b,P={};v=function(t,e,i){if(e===self.location.origin)return t;var s=i?"import "+JSON.stringify(t)+";":"importScripts("+JSON.stringify(t)+");";return URL.createObjectURL(new Blob([s],{type:"application/javascript"}))};var E={};function j(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}g=function(t){var e=E[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(t)return j(t[2])}return"/"}(),E[t]=e),e},b=function(t){var e=(""+t).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^/]+/);if(!e)throw new Error("Origin not found");return e[0]};let O=g("5d7Nu")+r("iE7OH").resolve("gVigP");var C;P=v(O,b(O),!1),C=function(){console.log("Init application");const t=function(t){const e=document.querySelector(t);if(!e)throw new o(t);return e}("#image_canvas");if(t.transferControlToOffscreen){console.log("Render in worker");const e=new Worker(P),i=t.transferControlToOffscreen();e.postMessage({canvas:i},[i])}else console.log("Render in main thread"),new w(t).start()},document.readyState!==n?C():document.addEventListener("DOMContentLoaded",C)}();
//# sourceMappingURL=index.2acb17fb.js.map
