{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-1fb00efa9d0fa29d.js","src/utils/onReady.js","src/utils/getElement.js","node_modules/@swc/helpers/src/_define_property.mjs","src/render/item.js","src/render/circle.js","src/render/vec2.js","src/render/object.js","src/render/constrain.js","src/render/circleConstrain.js","src/render/objectsGenerator.js","src/render/mappedObjectsGenerator.js","src/render/totalObjectsGenerator.js","src/render/index.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/helpers/get-worker-url.js","node_modules/@parcel/runtime-js/lib/runtime-00da8f0af75b5284.js","src/host/main.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5d7Nu\\\":\\\"index.2acb17fb.js\\\",\\\"gVigP\\\":\\\"main.9427a235.js\\\"}\"));","const DOCUMENT_STATE_LOADING = \"loading\";\n\n/**\n * Calls function when webpage is ready\n * @param {function} callback\n */\nexport function onReady(callback) {\n    if (document.readyState !== DOCUMENT_STATE_LOADING) {\n        callback();\n    } else {\n        document.addEventListener(\"DOMContentLoaded\", callback);\n    }\n}\n","export class ElementNotFound extends Error {}\n\nexport function getElement(selector) {\n    const element = document.querySelector(selector);\n    if (!element) {\n        throw new ElementNotFound(selector);\n    }\n\n    return element;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","export class Item {\n    /**\n     *\n     * @param {CanvasRenderingContext2D} context\n     */\n    constructor(context) {\n        this.context = context;\n    }\n\n    render() {\n\n    }\n}","import {Item} from \"./item\";\n\nexport class Circle extends Item {\n    x = 0;\n    y = 0;\n    r = 0;\n    color = '#00ff00';\n\n    constructor(context, x, y, r, color) {\n        super(context);\n\n        this.x = x;\n        this.y = y;\n        this.r = r;\n\n        if (color) {\n            this.color = color;\n        }\n    }\n\n    render() {\n        this.context.beginPath()\n        this.context.arc(\n            this.x,\n            this.y,\n            this.r,\n            0,\n            2 * Math.PI\n        )\n\n        this.context.fillStyle = this.color;\n        this.context.fill();\n    }\n}","export class Vec2 {\n    x = 0;\n    y = 0;\n\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    /**\n     * Adds vec2 to current vector\n     * @param {Vec2} vec2\n     * @returns {Vec2}\n     */\n    add(vec2) {\n        this.x += vec2.x;\n        this.y += vec2.y;\n        return this;\n    }\n\n    /**\n     * Subtract from current vector given vector\n     * @param {Vec2} vec2\n     * @returns {Vec2}\n     */\n    sub(vec2) {\n        this.x -= vec2.x;\n        this.y -= vec2.y;\n        return this;\n    }\n\n    /**\n     * Flips along X axis\n     * @returns {Vec2}\n     */\n    flipY() {\n        this.y = -this.y;\n        return this;\n    }\n\n    /**\n     * Sums current vector and given vector and returns new vector\n     * @param {Vec2} vec2\n     * @returns {Vec2}\n     */\n    sum(vec2) {\n        return new Vec2(this.x + vec2.x, this.y + vec2.y);\n    }\n\n    /**\n     * Calculate difference between current vector and given vector and returns\n     * new vector\n     *\n     * @param {Vec2} vec2\n     * @returns {Vec2}\n     */\n    diff(vec2) {\n        return new Vec2(this.x - vec2.x, this.y - vec2.y);\n    }\n\n    /**\n     * Multiplicates vector by numner\n     * @param {number} value\n     * @returns {Vec2}\n     */\n    mul(value) {\n        return new Vec2(this.x * value, this.y * value);\n    }\n\n    copy() {\n        return new Vec2(this.x, this.y);\n    }\n\n    get length() {\n        return Math.sqrt(this.x*this.x + this.y*this.y);\n    }\n\n    /**\n     * Returns normalized vector\n     * @returns {Vec2}\n     */\n    get normalized() {\n        const l = this.length;\n        return new Vec2(this.x / l, this.y / l);\n    }\n\n    static Zero() {\n        return new Vec2(0, 0);\n    }\n}\n\nexport class Vec2Math {\n    static diff(vec1, vec2) {\n        return new Vec2(vec1.x - vec2.x, vec1.y - vec2.y);\n    }\n\n    static mul(vec1, scalar) {\n        return new Vec2(vec1.x * scalar, vec1.y * scalar);\n    }\n}\n","import {Vec2, Vec2Math} from \"./vec2\";\n\nexport class BallsObject {\n    previousPosition = Vec2.Zero();\n    currentPosition = Vec2.Zero();\n\n    acc = Vec2.Zero();\n\n    radius = 10;\n    bounceValue = 1;\n\n    /**\n     * Creates balls object\n     * @param {Vec2} position\n     */\n    constructor(position) {\n        this.previousPosition = position;\n        this.currentPosition = position;\n    }\n\n    /**\n     * Updates state of object\n     * @param {number} step\n     */\n    update(step) {\n        const velocity = this.currentPosition.diff(this.previousPosition);\n        this.previousPosition = this.currentPosition.copy();\n        this.currentPosition.add(\n            velocity.add(\n                this.acc.mul(step * step)\n            )\n        )\n        this.acc = Vec2.Zero();\n    }\n\n    accelerate(acc) {\n        this.acc.add(acc);\n    }\n\n    /**\n     *\n     * @param {BallsObject} obj\n     */\n    collide(obj) {\n        const between = Vec2Math.diff(this.currentPosition, obj.currentPosition);\n        const distance = between.length;\n        const requiredDistance = this.radius + obj.radius;\n\n        if (distance < this.radius + obj.radius) {\n            const normalized = between.normalized;\n            const delta = requiredDistance - distance;\n            this.currentPosition.add(Vec2Math.mul(normalized, this.radius / requiredDistance * delta * this.bounceValue));\n            obj.currentPosition.sub(Vec2Math.mul(normalized, obj.radius / requiredDistance * delta * obj.bounceValue))\n        }\n    }\n\n    get velocity() {\n        return this.currentPosition.diff(this.previousPosition);\n    }\n\n    set velocity(v) {\n        this.previousPosition = Vec2Math.diff(this.currentPosition,v);\n    }\n}","export class Constrain {\n    constructor() {\n    }\n\n    /**\n     *\n     * @param {BallsObject} obj\n     */\n    applyConstrain(obj) {\n\n    }\n}","import {Constrain} from \"./constrain\";\nimport {Vec2} from \"./vec2\";\n\nexport class CircleConstrain extends Constrain {\n    /**\n     *\n     * @type {Vec2}\n     */\n    center = Vec2.Zero();\n\n    radius = 0;\n\n    constructor(center, radius) {\n        super();\n\n        this.center = center;\n        this.radius = radius;\n    }\n\n    applyConstrain(obj) {\n        super.applyConstrain(obj);\n\n        const toCenter = obj.currentPosition.diff(this.center);\n        const distance = toCenter.length;\n        const r = obj.radius;\n\n        if (distance > (this.radius - r)) {\n            const n = toCenter.normalized;\n            obj.currentPosition = this.center.sum(\n                n.mul(this.radius - r * obj.bounceValue)\n            );\n        }\n    }\n\n}","export class ObjectsGenerator {\n    constructor() {\n    }\n\n    // TODO Make me iterator\n    getNextObject(step) {\n        return null;\n    }\n}","import {ObjectsGenerator} from \"./objectsGenerator\";\n\n\nexport class MappedObjectGeneratorItem {\n    /**\n     * Delay before object appear\n     * @type {number}\n     */\n    timeout;\n\n    /**\n     * Object configuration\n     * @type {BallsObject}\n     */\n    object;\n\n    constructor(timeout, object) {\n        this.timeout = timeout;\n        this.object = object;\n    }\n\n}\n\nexport class MappedObjectsGenerator extends ObjectsGenerator {\n    /**\n     * @param {MappedObjectGeneratorItem[]} map\n     */\n    constructor(map) {\n        super();\n\n        this.items = map;\n        this.currentTime = 0;\n    }\n\n    getNextObject(step) {\n        this.currentTime += step;\n\n        console.log(this.currentTime)\n\n        const index = this.items.findIndex((item) => item.timeout < this.currentTime);\n        if (index > -1) {\n            return this.items.splice(index, 1)[0].object;\n        }\n    }\n}","import {ObjectsGenerator} from \"./objectsGenerator\";\n\nexport class TotalObjectsGenerator extends ObjectsGenerator {\n    constructor(count, delay, createCallback) {\n        super();\n        this.limit = count;\n        this.total = 0;\n\n        this.delay = delay;\n        this.create = createCallback;\n        this.lastCreateTime = 0;\n    }\n\n    getNextObject(step) {\n        if (this.total > this.limit) {\n            return;\n        }\n\n        this.lastCreateTime += step;\n        if (this.lastCreateTime > this.delay) {\n            const newItem = this.create();\n            this.lastCreateTime = 0;\n            this.total++;\n\n            return newItem;\n        }\n    }\n}","import {Circle} from \"./circle\";\nimport {Vec2} from \"./vec2\";\nimport {BallsObject} from \"./object\";\nimport {ViewportConstrain} from \"./viewportConstrain\";\nimport {CircleConstrain} from \"./circleConstrain\";\nimport {Velocity} from \"./velocity\";\nimport {MappedObjectGeneratorItem, MappedObjectsGenerator} from \"./mappedObjectsGenerator\";\nimport {TotalObjectsGenerator} from \"./totalObjectsGenerator\";\n\nconst balls = [\n    new MappedObjectGeneratorItem(\n        1,\n        new BallsObject(new Vec2(10, 10))\n    ),\n    new MappedObjectGeneratorItem(\n        2,\n        new BallsObject(new Vec2(10, 10))\n    ),\n    new MappedObjectGeneratorItem(\n        3,\n        new BallsObject(new Vec2(10, 10))\n    ),\n]\n\nexport class Render {\n    /**\n     * List of balls\n     * @type {BallsObject[]}\n     */\n    objects = []\n\n    /**\n     * @type {Constrain}\n     */\n    constrains = null;\n\n    constructor(canvas) {\n        this.canvas = canvas;\n        this.context = this.canvas.getContext(\"2d\");\n\n        this.timeRenderStart = performance.now();\n        this.timeRenderEnd = performance.now();\n        this.step = 0;\n        this.gravity = Vec2.Zero();\n\n        this.items = [];\n\n        this.objects = [];\n\n        this.generator = null;\n\n        this.configure();\n    }\n\n    configure() {\n        this.context.font = '10px serif';\n\n        this.gravity = new Vec2(0, 100);\n        //this.constrains = new ViewportConstrain(this.canvas.width, this.canvas.height)\n        this.constrains = new CircleConstrain(\n            new Vec2(this.canvas.width / 2, this.canvas.height / 2),\n            this.canvas.height / 2\n        )\n\n        this.items.push(\n            new Circle(\n                this.context,\n                this.canvas.width / 2 ,\n                this.canvas.height / 2,\n                this.canvas.height / 2,\n                '#000000'\n            )\n        );\n\n        //this.generator = new MappedObjectsGenerator(balls);\n        this.generator = new TotalObjectsGenerator(200, 0.2, () => {\n            const ball = new BallsObject(new Vec2(this.canvas.width / 2, this.canvas.height / 2));\n            ball.velocity = new Vec2(5, -1);\n            ball.radius = Math.random() * 20 + 5;\n            return ball;\n        })\n    }\n\n    update(time) {\n        const newBall = this.generator.getNextObject(time);\n        if (newBall) {\n            this.objects.push(newBall);\n        }\n\n        this.applyGravity();\n        this.applyConstrains();\n        this.processCollisions();\n        this.objects.forEach(obj => obj.update(time));\n    }\n\n    tick() {\n        if (this.step < 0) {\n            this.step = 0;\n        }\n\n        this.update(this.step / 1000);\n\n        this.clear();\n        this.renderItems();\n\n        this.printFPS();\n    }\n\n    nextFrame = (time) => {\n        this.step = time - this.timeRenderEnd;\n        if (this.step < 0) {\n            this.step = 0;\n        }\n\n        this.tick();\n\n        this.timeRenderEnd = time;\n        self.requestAnimationFrame(this.nextFrame);\n    }\n\n    nextInterval = () => {\n        this.timeRenderStart = performance.now()\n        this.step = this.timeRenderStart - this.timeRenderEnd;\n\n        if (this.step < 0) {\n            this.step = 0;\n        }\n\n        this.tick();\n\n        this.timeRenderEnd = performance.now();\n    }\n\n    applyGravity() {\n        this.objects.forEach(obj => obj.accelerate(this.gravity))\n    }\n\n    applyConstrains() {\n        this.objects.forEach(obj => this.constrains.applyConstrain(obj))\n    }\n\n    processCollisions() {\n        this.objects.forEach(objA => {\n            this.objects.forEach(objB => {\n                if (objA === objB) {\n                    return;\n                }\n\n                objA.collide(objB);\n            })\n        })\n    }\n\n    renderItems() {\n        this.items.forEach(item => item.render());\n\n        this.objects.forEach(obj => {\n            const img = new Circle(\n                this.context,\n                obj.currentPosition.x,\n                obj.currentPosition.y,\n                obj.radius\n            );\n            img.render();\n\n            // const v = new Velocity(this.context, obj);\n            // v.render();\n        })\n    }\n\n    printText(text, x, y) {\n        this.context.fillStyle = \"#000000\";\n        this.context.fillText(text, x, y);\n    }\n\n    printFPS() {\n        this.printText(`${Math.round(this.step)} ms / ${Math.round(1000/this.step)} FPS`, 0, 10);\n    }\n\n    clear() {\n        this.context.fillStyle = \"#ffffff\";\n        this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n    }\n\n    start() {\n        if (self.requestAnimationFrame) {\n            self.requestAnimationFrame(this.nextFrame);\n        } else {\n            setInterval(this.nextInterval, 16)\n        }\n    }\n}","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","\"use strict\";\n\nmodule.exports = function (workerUrl, origin, isESM) {\n  if (origin === self.location.origin) {\n    // If the worker bundle's url is on the same origin as the document,\n    // use the worker bundle's own url.\n    return workerUrl;\n  } else {\n    // Otherwise, create a blob URL which loads the worker bundle with `importScripts`.\n    var source = isESM ? 'import ' + JSON.stringify(workerUrl) + ';' : 'importScripts(' + JSON.stringify(workerUrl) + ');';\n    return URL.createObjectURL(new Blob([source], {\n      type: 'application/javascript'\n    }));\n  }\n};","let workerURL = require('./helpers/get-worker-url');\nlet bundleURL = require('./helpers/bundle-url');\nlet url = bundleURL.getBundleURL('5d7Nu') + require('./helpers/bundle-manifest').resolve(\"gVigP\");module.exports = workerURL(url, bundleURL.getOrigin(url), false);","import { onReady }  from \"../utils/onReady\";\nimport { getElement } from \"../utils/getElement\";\nimport {Render} from \"../render\";\n\nfunction initApplication() {\n    console.log('Init application');\n    /**\n     * @var {HTMLCanvasElement}\n     */\n    const canvas = getElement(\"#image_canvas\");\n\n    if (canvas.transferControlToOffscreen) {\n        console.log('Render in worker');\n        const worker = new Worker(new URL('../worker/main.js', import.meta.url), {type: 'module'});\n        const offscreen = canvas.transferControlToOffscreen();\n        worker.postMessage({canvas: offscreen}, [offscreen]);\n    } else {\n        // There is no support for offscreen render\n        console.log('Render in main thread');\n        const render = new Render(canvas);\n        render.start();\n    }\n}\n\nonReady(initApplication);"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$58eda289ea048412$var$DOCUMENT_STATE_LOADING","$eac4a1d0ec467e0d$export$9a8db54f22040fa8","$9139f4380ced0e7c$export$2e2bcd8739ae039","obj","key","value","defineProperty","enumerable","configurable","writable","$6a1e2b7c41a3ea0e$export$6d08773d2e66f8f2","render","constructor","context","this","$eb2203da726cc65b$export$c89a927ffc67e6fa","beginPath","arc","x","y","r","Math","PI","fillStyle","color","fill","super","$17aafd298d83c1fb$export$ac4bca90992eed1","add","vec2","sub","flipY","sum","diff","mul","copy","sqrt","normalized","l","static","$17aafd298d83c1fb$export$92b0492af2e4b152","vec1","scalar","$2079f3e365828c3b$export$e4134913c977dac4","update","step","velocity","currentPosition","previousPosition","acc","Zero","accelerate","collide","between","distance","requiredDistance","radius","delta","bounceValue","v","position","$19d4d678880ab8c2$export$504c072c1a75a697","applyConstrain","$b99be705369b6dcf$export$4384cf344d141b50","toCenter","center","n","$77242e0c215628b5$export$780b62e628ec518f","getNextObject","$8f759762936427f5$export$cf86583e2e1a386b","timeout","object","$0b9f7d857f4d9b8d$export$a16316d22a718d27","total","limit","lastCreateTime","delay","newItem","create","count","createCallback","$b87dd7b3c2f70655$export$160ae30d75f98247","configure","font","gravity","constrains","canvas","width","height","items","push","generator","ball","random","time","newBall","objects","applyGravity","applyConstrains","processCollisions","forEach","tick","clear","renderItems","printFPS","objA","objB","item","printText","text","fillText","round","fillRect","start","self","requestAnimationFrame","nextFrame","setInterval","nextInterval","timeRenderEnd","timeRenderStart","performance","now","getContext","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$export$5a759dc7a1cfb72a","$902f5cabe5153acc$exports","workerUrl","origin","isESM","location","source","stringify","URL","createObjectURL","Blob","type","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","$8ff44029270d1028$var$url","resolve","callback","$8ff44029270d1028$exports","console","log","selector","element","document","querySelector","transferControlToOffscreen","worker","Worker","offscreen","postMessage","readyState","addEventListener"],"version":3,"file":"index.2acb17fb.js.map"}